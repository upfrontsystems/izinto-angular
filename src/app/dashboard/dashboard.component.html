<div class="m-l-20 m-r-20" *ngIf="mobileQuery.matches">
    <div class="pull-right" *ngIf="dashboard && dashboard.collection_id==15"><img src="assets/images/water-hunters.png"/></div>
    <h3 class="page-title">
        <a *ngIf="parent" [routerLink]="[parent.url]">{{parent.title}}</a>
        &gt; {{dashboard?.title}}
    </h3>
</div>

<div fxLayout="row wrap" class="clear" id="dashboard">
    <div fxFlex="100" class="p-b-20">
        <mat-card *ngIf="dashboard" [class]="dashboard.type == 'new' && 'full-height'">

            <app-dashboard-date-selector [mobileQueryMatches]="mobileQuery.matches" [dateViews]="dateViews">
            </app-dashboard-date-selector>

            <mat-card-content>

                <button mat-icon-button class="pull-right edit-button" (click)="editDashboard()" *ngIf="canEdit"
                        title="Edit">
                    <mat-icon>edit</mat-icon>
                </button>

                <mat-card-subtitle>{{dashboard.description}}</mat-card-subtitle>

                <app-single-stat-list *ngIf="dashboard.type == 'old'" [dashboardId]="dashboardId" [addedSingleStat]="addedSingleStat"
                                      [variables]="dashboard.variables" [dataSources]="dataSources">
                </app-single-stat-list>

                <app-chart-list *ngIf="dashboard.type == 'old'" appMouseListener [dateViews]="dateViews"
                                [dashboardId]="dashboardId" [addedChart]="addedChart" [variables]="dashboard.variables"
                                [dataSources]="dataSources"></app-chart-list>

                <iframe *ngIf="dashboard.type == 'new'" class="b-0" style="width: 100%; height: 100%" scrolling="yes"
                        allowfullscreen id="dashboard-{{dashboard.id}}"
                        sandbox="allow-same-origin allow-scripts allow-downloads allow-popups allow-forms allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"
                        [srcdoc]="content"></iframe>

            </mat-card-content>

        </mat-card>
    </div>
</div>
<app-fab-speed-dial *ngIf="canEdit && (dashboard && dashboard.type == 'old')" (buttonClick)="fabClick($event)" [fabButtons]="fabButtons"></app-fab-speed-dial>
